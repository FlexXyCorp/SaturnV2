name : Deploy to server

on :
  push:
    branches: [ Staging ]

jobs :
  build:
    runs-on: debian-latest
    
    steps:
      - uses: action/checkout@v2
      
      - name: Install Dependencies
        run: npm i
      
      - name: Start
        run: node .
      
      - name: Upload to server
        uses: SamKirkland/FTP-Deploy-Action@4.0.0
        with:
          server: ${{ secrets.SERVER }}
          username: ${{ secrets.USERNAME }}
          password: ${{ secrets.PASSWORD }}
        
name: Deploy

on:

  push:

    branches:

      - main

jobs:

  deploy:

    runs-on: ubuntu-latest

    steps:

      - name: Checkout repository

        uses: actions/checkout@v2

      - name: FTP Deploy

        uses: SamKirkland/FTP-Deploy-Action@4.1

        with:

          server: ${{ secrets.SERVER }}

          username: ${{ secrets.USERNAME }}

          password: ${{ secrets.ASSWORD }}

          server-dir: . 

          local-dir: .

          exclude: .git*
